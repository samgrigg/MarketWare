if @user.errors.empty?

  page.call "make_current_user"
  if params[:response_type] == "try_it_free"
    page.call "start_download"
  else
    page.call "show_demo"
  end
  
else
  page[:flash_error].replace_html flash[:error]
  page[:flash_error].show
  flash.discard(:error)
end